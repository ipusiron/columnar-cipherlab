<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Columnar CipherLab - 縦列転置式暗号ツール</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <h1>Columnar CipherLab <span class="sub">– 縦列転置式暗号（Columnar Transposition）で暗号化・復号するWebツールです</span></h1>
  </header>

  <main class="container">
    <div class="tabs">
      <button class="tab-button active" data-tab="enc">暗号化</button>
      <button class="tab-button" data-tab="dec">復号</button>
      <button class="tab-button" data-tab="double">二重転置（未実装）</button>
      <button class="tab-button" data-tab="variants">派生形（未実装）</button>
    </div>

    <!-- 暗号化タブ -->
    <section id="tab-enc" class="tab-content active">
      <div class="card grid-2">
        <div>
          <h2>入力</h2>
          <textarea id="enc-plain" class="mono" rows="6" placeholder="平文を入力"></textarea>

          <div class="fieldset">
            <div class="field">
              <label class="lbl">鍵タイプ</label>
              <label><input type="radio" name="enc-keytype" value="keyword" checked> キーワード</label>
              <label><input type="radio" name="enc-keytype" value="numeric"> 数列</label>
            </div>
            <div class="field key-row" id="enc-keyword-row">
              <label class="lbl">キーワード</label>
              <input id="enc-keyword" type="text" placeholder="例：ZEBRAS / BALLOON" />
            </div>
            <div class="field key-row hidden" id="enc-numeric-row">
              <label class="lbl">鍵数列</label>
              <input id="enc-numeric" type="text" placeholder="例：3 1 4 2 / 3,1,4,2 / 3142" />
            </div>

            <div class="field">
              <label class="lbl">モード</label>
              <label><input type="checkbox" id="enc-complete" checked> 完全（パディングで長方形化）</label>
              <label class="pad">
                パディング：<input id="enc-padchar" type="text" value="X" maxlength="1" class="w4" />
              </label>
            </div>

            <div class="field">
              <label class="lbl">整形</label>
              <label><input type="checkbox" id="enc-stripspace" checked> スペース削除</label>
              <label><input type="checkbox" id="enc-uppercase" checked> 英大文字化</label>
            </div>
          </div>

          <div class="buttons">
            <button id="enc-run" class="primary">暗号化</button>
            <button id="enc-sample" class="secondary">サンプル</button>
            <button id="enc-clear" class="ghost">クリア</button>
          </div>

          <div id="enc-error" class="error hidden"></div>

          <h2>暗号文</h2>
          <div class="output-wrapper">
            <textarea id="enc-cipher" class="mono" rows="4" readonly></textarea>
            <button id="enc-copy" class="copy-btn" title="コピー">📋</button>
          </div>
        </div>

        <div>
          <h2>可視化</h2>
          <div class="key-visual">
            <div>列順（小さい順に読み出し）：<span id="enc-order"></span></div>
          </div>
          <div id="enc-grid" class="gridwrap"></div>
        </div>
      </div>
    </section>

    <!-- 復号タブ -->
    <section id="tab-dec" class="tab-content">
      <div class="card grid-2">
        <div>
          <h2>入力</h2>
          <textarea id="dec-cipher" class="mono" rows="6" placeholder="暗号文を入力"></textarea>

          <div class="fieldset">
            <div class="field">
              <label class="lbl">鍵タイプ</label>
              <label><input type="radio" name="dec-keytype" value="keyword" checked> キーワード</label>
              <label><input type="radio" name="dec-keytype" value="numeric"> 数列</label>
            </div>
            <div class="field key-row" id="dec-keyword-row">
              <label class="lbl">キーワード</label>
              <input id="dec-keyword" type="text" placeholder="例：ZEBRAS / BALLOON" />
            </div>
            <div class="field key-row hidden" id="dec-numeric-row">
              <label class="lbl">鍵数列</label>
              <input id="dec-numeric" type="text" placeholder="例：3 1 4 2 / 3,1,4,2 / 3142" />
            </div>

            <div class="field">
              <label class="lbl">モード</label>
              <label><input type="checkbox" id="dec-complete" checked> 完全（長方形）</label>
              <label><input type="checkbox" id="dec-autostrip" checked> パディング自動除去</label>
              <label class="pad">パディング：<input id="dec-padchar" type="text" value="X" maxlength="1" class="w4" /></label>
            </div>
          </div>

          <div class="buttons">
            <button id="dec-run" class="primary">復号</button>
            <button id="dec-clear" class="ghost">クリア</button>
          </div>

          <div id="dec-error" class="error hidden"></div>

          <h2>復号結果</h2>
          <div class="output-wrapper">
            <textarea id="dec-plain" class="mono" rows="4" readonly></textarea>
            <button id="dec-copy" class="copy-btn" title="コピー">📋</button>
          </div>
        </div>

        <div>
          <h2>可視化</h2>
          <div class="key-visual">
            <div>列順（小さい順に読み込み）：<span id="dec-order"></span></div>
          </div>
          <div id="dec-grid" class="gridwrap"></div>
        </div>
      </div>
    </section>

    <!-- 二重転置タブ（未実装） -->
    <section id="tab-double" class="tab-content">
      <div class="card">
        <h2>二重転置（未実装）</h2>
        <p>縦→縦、縦→横の二重転置を可視化予定です。歴史的にはニヒリスト式（縦＋横）も知られています。</p>
      </div>
    </section>

    <!-- 派生形タブ（未実装） -->
    <section id="tab-variants" class="tab-content">
      <div class="card">
        <h2>派生形（未実装）</h2>
        <p>斜め書き出し、らせん書き出し、開始位置の工夫などの派生を追加予定です。</p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer">
      🔗 GitHubリポジトリはこちら（ <a href="https://github.com/ipusiron/columnar-cipherlab" target="_blank">ipusiron/columnar-cipherlab</a> ）
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
